_name: google_storage_object_signed_url
arguments:
  path:
    required: true
    help: (Required) The full path to the object inside the bucket
    type: Text
  credentials:
    required: false
    help: ! '(Optional) What Google service account credentials json should be used
      to sign the URL. This data source checks the following locations for credentials,
      in order of preference: data source @credentials@ attribute, provider @credentials@
      attribute and finally the GOOGLE_APPLICATION_CREDENTIALS environment variable.'
    type: Text
  bucket:
    required: true
    help: (Required) The name of the bucket to read the object from
    type: Text
  http_method:
    required: false
    help: (Optional) What HTTP Method will the signed URL allow (defaults to @GET@
      )
    type: Text
  duration:
    required: false
    help: (Optional) For how long shall the signed URL be valid (defaults to 1 hour
      - i.e. @1h@ ). See <https://golang.org/pkg/time/#ParseDuration> for info on
      valid duration formats.
    type: Text
attributes:
  signed_url:
    help: ! '- The signed URL that can be used to access the storage object without
      authentication.'
    type: Text
about: The Google Cloud storage signed URL data source generates a signed URL for
  a given storage object. Signed URLs provide a way to give time-limited read or write
  access to anyone in possession of the URL, regardless of whether they have a Google
  account.
examples:
- name: null
  code:
  - get_url <- datasource "get_url" $
  - ! '    storage_object_signed_url_datasource'
  - ! '        & bucket .~ "fried_chicken"'
  - ! '        & path .~ "path/to/file"'
  - ! '        & content_md5 .~ "pRviqwS4c4OTJRTe03FD1w=="'
  - ! '        & content_type .~ "text/plain"'
  - ! '        & duration .~ "2d"'
  - ! '        & credentials .~ file("path/to/credentials.json")'
