_name: aws_ssm_maintenance_window_task
arguments:
  task_type:
    required: true
    help: (Required) The type of task being registered. The only allowed value is
      @RUN_COMMAND@ .
    type: Text
  priority:
    required: false
    help: (Optional) The priority of the task in the Maintenance Window, the lower
      the number the higher the priority. Tasks in a Maintenance Window are scheduled
      in priority order with tasks that have the same priority scheduled in parallel.
    type: Text
  task_parameters:
    required: false
    help: (Optional) A structure containing information about parameters required
      by the particular @task_arn@ . Documented below.
    type: Text
  max_errors:
    required: true
    help: (Required) The maximum number of errors allowed before this task stops being
      scheduled.
    type: Text
  max_concurrency:
    required: true
    help: (Required) The maximum number of targets this task can be run for in parallel.
    type: Text
  service_role_arn:
    required: true
    help: (Required) The role that should be assumed when executing the task.
    type: Text
  task_arn:
    required: true
    help: (Required) The ARN of the task to execute.
    type: Text
  logging_info:
    required: false
    help: (Optional) A structure containing information about an Amazon S3 bucket
      to write instance-level logs to. Documented below.
    type: Text
  targets:
    required: true
    help: (Required) The targets (either instances or window target ids). Instances
      are specified using Key=InstanceIds,Values=instanceid1,instanceid2. Window target
      ids are specified using Key=WindowTargetIds,Values=window target id1, window
      target id2.
    type: Text
  window_id:
    required: true
    help: (Required) The Id of the maintenance window to register the task with.
    type: Text
attributes:
  id:
    help: ! '- The ID of the maintenance window task.'
    type: Text
about: Provides an SSM Maintenance Window Task resource
examples:
- name: null
  code:
  - window <- resource "window" $
  - ! '    ssm_maintenance_window_resource'
  - ! '        & name .~ "maintenance-window-%s"'
  - ! '        & schedule .~ "cron(0 16 ? * TUE *)"'
  - ! '        & duration .~ 3'
  - ! '        & cutoff .~ 1'
  - ! ' '
  - task <- resource "task" $
  - ! '    ssm_maintenance_window_task_resource'
  - ! '        & window_id .~ compute window @"id"'
  - ! '        & task_type .~ "RUN_COMMAND"'
  - ! '        & task_arn .~ "AWS-RunShellScript"'
  - ! '        & priority .~ 1'
  - ! '        & service_role_arn .~ "arn:aws:iam::187416307283:role/service-role/AWS_Events_Invoke_Run_Command_112316643"'
  - ! '        & max_concurrency .~ "2"'
  - ! '        & max_errors .~ "1"'
  - ! ' '
  - instance <- resource "instance" $
  - ! '    instance_resource'
  - ! '        & ami .~ "ami-4fccb37f"'
  - ! '        & instance_type .~ "m1.small"'
