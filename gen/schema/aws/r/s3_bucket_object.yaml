_name: aws_s3_bucket_object
arguments:
  etag:
    required: false
    help: (Optional) Used to trigger updates. The only meaningful value is @${md5(file("path/to/file"))}@
      . This attribute is not compatible with @kms_key_id@ .
    type: Text
  kms_key_id:
    required: false
    help: ! '(Optional) Specifies the AWS KMS Key ARN to use for object encryption.
      This value is a fully qualified of the KMS Key. If using @aws_kms_key@ , use
      the exported @arn@ attribute: @kms_key_id = "${aws_kms_key.foo.arn}"@'
    type: Text
  storage_class:
    required: false
    help: (Optional) Specifies the desired <http://docs.aws.amazon.com/AmazonS3/latest/dev/storage-class-intro.html>
      for the object. Can be either " @STANDARD@ ", " @REDUCED_REDUNDANCY@ ", or "
      @STANDARD_IA@ ". Defaults to " @STANDARD@ ".
    type: Text
  content_type:
    required: false
    help: (Optional) A standard MIME type describing the format of the object data,
      e.g. application/octet-stream. All Valid MIME Types are valid for this input.
    type: Text
  website_redirect:
    required: false
    help: (Optional) Specifies a target URL for <http://docs.aws.amazon.com/AmazonS3/latest/dev/how-to-page-redirect.html>
      .
    type: Text
  bucket:
    required: true
    help: (Required) The name of the bucket to put the file in.
    type: Text
  content:
    required: true
    help: (Required unless @source@ given) The literal content being uploaded to the
      bucket.
    type: Text
  content_language:
    required: false
    help: (Optional) The language the content is in e.g. en-US or en-GB.
    type: Text
  cache_control:
    required: false
    help: (Optional) Specifies caching behavior along the request/reply chain Read
      <http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9> for further
      details.
    type: Text
  key:
    required: true
    help: (Required) The name of the object once it is in the bucket.
    type: Text
  source:
    required: true
    help: (Required) The path to the source file being uploaded to the bucket.
    type: Text
  content_encoding:
    required: false
    help: (Optional) Specifies what content encodings have been applied to the object
      and thus what decoding mechanisms must be applied to obtain the media-type referenced
      by the Content-Type header field. Read <http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.11>
      for further information.
    type: Text
  acl:
    required: false
    help: (Optional) The <https://docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html#canned-acl>
      to apply. Defaults to "private".
    type: Text
  content_disposition:
    required: false
    help: (Optional) Specifies presentational information for the object. Read <http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1>
      for further information.
    type: Text
  server_side_encryption:
    required: false
    help: (Optional) Specifies server-side encryption of the object in S3. Valid values
      are " @AES256@ " and " @aws:kms@ ".
    type: Text
  tags:
    required: false
    help: (Optional) A mapping of tags to assign to the object.
    type: Text
attributes:
  etag:
    help: ! '- the ETag generated for the object (an MD5 sum of the object content).'
    type: Text
  id:
    help: ! '- the @key@ of the resource supplied above'
    type: Text
  version_id:
    help: ! '- A unique version ID value for the object, if bucket versioning is enabled.'
    type: Text
about: Provides a S3 bucket object resource.
examples:
- name: Uploading a file to a bucket
  code:
  - object <- resource "object" $
  - ! '    s3_bucket_object_resource'
  - ! '        & bucket .~ "your_bucket_name"'
  - ! '        & key .~ "new_object_key"'
  - ! '        & source .~ "path/to/file"'
  - ! '        & etag .~ md5(file("path/to/file"))'
- name: Encrypting with KMS Key
  code:
  - examplekms <- resource "examplekms" $
  - ! '    kms_key_resource'
  - ! '        & description .~ "KMS key 1"'
  - ! '        & deletion_window_in_days .~ 7'
  - ! ' '
  - examplebucket <- resource "examplebucket" $
  - ! '    s3_bucket_resource'
  - ! '        & bucket .~ "examplebuckettftest"'
  - ! '        & acl .~ "private"'
  - ! ' '
  - examplebucket_object <- resource "examplebucket_object" $
  - ! '    s3_bucket_object_resource'
  - ! '        & key .~ "someobject"'
  - ! '        & bucket .~ compute examplebucket @"bucket"'
  - ! '        & source .~ "index.html"'
  - ! '        & kms_key_id .~ compute examplekms @"arn"'
- name: Server Side Encryption with S3 Default Master Key
  code:
  - examplebucket <- resource "examplebucket" $
  - ! '    s3_bucket_resource'
  - ! '        & bucket .~ "examplebuckettftest"'
  - ! '        & acl .~ "private"'
  - ! ' '
  - examplebucket_object <- resource "examplebucket_object" $
  - ! '    s3_bucket_object_resource'
  - ! '        & key .~ "someobject"'
  - ! '        & bucket .~ compute examplebucket @"bucket"'
  - ! '        & source .~ "index.html"'
  - ! '        & server_side_encryption .~ "aws:kms"'
