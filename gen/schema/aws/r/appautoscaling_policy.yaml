_name: aws_appautoscaling_policy
arguments:
  service_namespace:
    required: true
    help: ! '(Required) The AWS service namespace of the scalable target. Documentation
      can be found in the @ServiceNamespace@ parameter at: <http://docs.aws.amazon.com/ApplicationAutoScaling/latest/APIReference/API_RegisterScalableTarget.html#API_RegisterScalableTarget_RequestParameters>'
    type: Text
  name:
    required: true
    help: (Required) The name of the policy.
    type: Text
  policy_type:
    required: false
    help: (Optional) For DynamoDB, only @TargetTrackingScaling@ is supported. For
      any other service, only @StepScaling@ is supported. Defaults to @StepScaling@
      .
    type: Text
  scalable_dimension:
    required: true
    help: ! '(Required) The scalable dimension of the scalable target. Documentation
      can be found in the @ScalableDimension@ parameter at: <http://docs.aws.amazon.com/ApplicationAutoScaling/latest/APIReference/API_RegisterScalableTarget.html#API_RegisterScalableTarget_RequestParameters>'
    type: Text
  resource_id:
    required: true
    help: ! '(Required) The resource type and unique identifier string for the resource
      associated with the scaling policy. Documentation can be found in the @ResourceId@
      parameter at: <http://docs.aws.amazon.com/ApplicationAutoScaling/latest/APIReference/API_RegisterScalableTarget.html#API_RegisterScalableTarget_RequestParameters>'
    type: Text
  step_scaling_policy_configuration:
    required: false
    help: (Optional) Step scaling policy configuration, requires @policy_type = "StepScaling"@
      (default). See supported fields below.
    type: Text
  target_tracking_scaling_policy_configuration:
    required: false
    help: (Optional) A target tracking policy, requires @policy_type = "TargetTrackingScaling"@
      . See supported fields below.
    type: Text
attributes: {}
about: Provides an Application AutoScaling Policy resource.
examples:
- name: DynamoDB Table Autoscaling
  code:
  - dynamodb_table_read_target <- resource "dynamodb_table_read_target" $
  - ! '    appautoscaling_target_resource'
  - ! '        & max_capacity .~ 100'
  - ! '        & min_capacity .~ 5'
  - ! '        & resource_id .~ "table/tableName"'
  - ! '        & role_arn .~ data.aws_iam_role.DynamoDBAutoscaleRole.arn'
  - ! '        & scalable_dimension .~ "dynamodb:table:ReadCapacityUnits"'
  - ! '        & service_namespace .~ "dynamodb"'
  - ! ' '
  - dynamodb_table_read_policy <- resource "dynamodb_table_read_policy" $
  - ! '    appautoscaling_policy_resource'
  - ! '        & name .~ "DynamoDBReadCapacityUtilization:"<>compute dynamodb_table_read_target
    @"resource_id"'
  - ! '        & policy_type .~ "TargetTrackingScaling"'
  - ! '        & resource_id .~ compute dynamodb_table_read_target @"resource_id"'
  - ! '        & scalable_dimension .~ compute dynamodb_table_read_target @"scalable_dimension"'
  - ! '        & service_namespace .~ compute dynamodb_table_read_target @"service_namespace"'
